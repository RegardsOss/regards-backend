<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: common/access-rights/AccessRightsComponent.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: common/access-rights/AccessRightsComponent.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
const React = require("react");
const react_redux_1 = require('react-redux');
const AccessRightsActions_1 = require("./AccessRightsActions");
/**
* Root class for all RegardsView in each modules.
* This class handle the accessRights to the view modules.
*/
class AccessRightsComponent extends React.Component {
    /**
    * Constructor.
    * By default the access rights to the view is false.
    * Define dependencies for access rights management.
    */
    constructor() {
        super();
        this.unsubscribeViewAccessRights = null;
        this.oldRender = null;
        this.checkViewAccessRights = this.checkViewAccessRights.bind(this);
    }
    /**
    * Method to get the REST dependencies of the view.
    * If all the dependencies are authorized, then the view can be displayed.
    * return null for no dependencies or an object :
    * {
    *  GET : ["dependence"],
    *  POST : ["dependence"],
    *  PUT : ["dependence"],
    *  DELETE : ["dependence"],
    * }
    */
    getDependencies() {
        return this.props.dependencies;
    }
    render() {
        return (React.createElement("div", null, this.props.children));
    }
    /**
    * Method to check if the view is displayable
    */
    componentWillMount() {
        if (this.getDependencies() === null) {
            this.setState({
                access: true
            });
        }
        else {
            this.oldRender = Object.assign({}, this.render);
            this.render = () => { return null; };
            this.props.doFetchAccessRights(this.getDependencies());
        }
    }
    checkViewAccessRights() {
        const view = this.props.views.find((curent) => {
            return curent.name === this.constructor.name;
        });
        // If not, check access from server
        if (view) {
            if (view.access === true) {
                console.log("Access granted to view : " + this.constructor.name);
                // Activate component render
                this.render = this.oldRender;
            }
            else {
                console.log("Access denied to view : " + this.constructor.name);
            }
        }
    }
}
const mapStateToProps = (state) => ({
    views: state.views
});
const mapDispatchToProps = (dispatch) => ({
    doFetchAccessRights: (dependencies) => dispatch(AccessRightsActions_1.fetchAccessRights(dependencies))
});
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = react_redux_1.connect(mapStateToProps, mapDispatchToProps)(AccessRightsComponent);
//# sourceMappingURL=AccessRightsComponent.js.map</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AccessRightsComponent.html">AccessRightsComponent</a></li><li><a href="LoginComponent.html">LoginComponent</a></li><li><a href="PluginComponent.html">PluginComponent</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getThemeStyles">getThemeStyles</a></li><li><a href="global.html#React">React</a></li><li><a href="global.html#redux_1">redux_1</a></li><li><a href="global.html#routes_1">routes_1</a></li><li><a href="global.html#UPDATE_OR_CREATE_PROJECT_ADMIN">UPDATE_OR_CREATE_PROJECT_ADMIN</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Jul 13 2016 14:27:19 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
