/*
 * Copyright 2017-2019 CNES - CENTRE NATIONAL d'ETUDES SPATIALES
 *
 * This file is part of REGARDS.
 *
 * REGARDS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * REGARDS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with REGARDS. If not, see <http://www.gnu.org/licenses/>.
 */
package fr.cnes.regards.modules.configuration.dao;

import org.junit.Test;

import fr.cnes.regards.modules.configuration.dao.scripts.uiconfiguration.V4_0_0__update_modules_conf;

/**
 * @author sbinda
 *
 */
public class MigrationV4Test {

    private final String oldConf = "{\"layout\":{\"id\":\"application\",\"type\":\"FormMainContainer\",\"classes\":[],\"styles\":{},\"containers\":[{\"id\":\"defaultCriterionLine\",\"type\":\"RowContainer\",\"classes\":[],\"styles\":{},\"containers\":[{\"id\":\"Droite\",\"type\":\"ColumnContainer50PercentWidth\",\"classes\":[],\"styles\":{}},{\"id\":\"Gauche\",\"type\":\"ColumnContainer50PercentWidth\",\"classes\":[],\"styles\":{}}]}]},\"datasets\":{\"type\":\"selectedDatasets\",\"selectedDatasets\":[\"URN:AIP:DATASET:ssalto:706a76bb-0e13-453a-a53c-2c894269e199:V1\",\"URN:AIP:DATASET:ssalto:5ab68b19-ccdb-4a13-8d59-f39f32ef11ce:V1\",\"URN:AIP:DATASET:ssalto:ee42534c-bfd5-461d-952e-2e1f18cf627c:V1\",\"URN:AIP:DATASET:ssalto:bf9ee481-f0be-4795-a790-6ae533c6dad9:V1\",\"URN:AIP:DATASET:ssalto:e4380ad2-6df4-4b24-bfe8-0faedcc00224:V1\",\"URN:AIP:DATASET:ssalto:19373a12-ebac-412f-8b0b-9421f90b90f4:V1\",\"URN:AIP:DATASET:ssalto:88a65391-5651-41ce-b4e3-28fd199c7b1d:V1\",\"URN:AIP:DATASET:ssalto:bc939a43-8e41-47c2-9385-b0d9e5479cda:V1\",\"URN:AIP:DATASET:ssalto:8a2303ec-947b-4c66-a992-b1dfb0c2b082:V1\",\"URN:AIP:DATASET:ssalto:dd7f30f4-87c0-4d20-a6bf-2e806eee680f:V1\",\"URN:AIP:DATASET:ssalto:8842ecf8-a364-4d34-9e75-8ae6318f12f4:V1\",\"URN:AIP:DATASET:ssalto:2eef3191-7d2d-4fe3-991a-bf19c38dc6ed:V1\",\"URN:AIP:DATASET:ssalto:f550dbe5-af0c-4428-9463-965778d862f4:V1\",\"URN:AIP:DATASET:ssalto:3888fbbb-9bd9-42eb-97be-5921cc2bf17a:V1\",\"URN:AIP:DATASET:ssalto:00752291-b3ab-491c-9c92-e1cee6f8d82e:V1\",\"URN:AIP:DATASET:ssalto:2ec5e19f-d234-4774-976f-cbe7ffc46045:V1\",\"URN:AIP:DATASET:ssalto:5b3d9c60-3148-4f83-afc0-f02cfd85925f:V1\",\"URN:AIP:DATASET:ssalto:d56ab597-b41a-4aef-be0f-63ed1b58d389:V1\",\"URN:AIP:DATASET:ssalto:93954643-4c3b-40d7-aafa-80d713e1bbff:V1\",\"URN:AIP:DATASET:ssalto:c4626238-5d10-4315-af91-5f7bae2b2d0d:V1\",\"URN:AIP:DATASET:ssalto:d9cbf0b8-703c-4bfb-883d-5d6d349f2540:V1\",\"URN:AIP:DATASET:ssalto:5be3b0f9-1ba0-4c8c-81b9-a1f78246b003:V1\",\"URN:AIP:DATASET:ssalto:7cd52787-165f-4e67-aafe-38b3e8ce3e01:V1\",\"URN:AIP:DATASET:ssalto:1057be21-4963-4aad-93cb-46ada46a7c09:V1\",\"URN:AIP:DATASET:ssalto:875a069f-925a-4196-a31e-727a681796bf:V1\",\"URN:AIP:DATASET:ssalto:28014a14-fd4c-4f39-a57a-a301019d0e0a:V1\",\"URN:AIP:DATASET:ssalto:26aa7c12-94e2-4de7-b5b6-3bd658864159:V1\",\"URN:AIP:DATASET:ssalto:a6953555-e699-4621-8d24-a8699d15b54a:V1\",\"URN:AIP:DATASET:ssalto:bfd0c201-f470-4dfd-860c-ad5bdb34c3d4:V1\",\"URN:AIP:DATASET:ssalto:8b08784f-98b5-42a6-953f-04fecfc1d4b2:V1\",\"URN:AIP:DATASET:ssalto:e40362b3-924b-4f25-bd18-caf5c69d5088:V1\",\"URN:AIP:DATASET:ssalto:21e10478-d7ab-42ed-aad0-60cfce6347a7:V1\",\"URN:AIP:DATASET:ssalto:302b042a-0237-43ac-8dde-6f5582c252b3:V1\",\"URN:AIP:DATASET:ssalto:77251955-2cb2-462c-af9b-fca3fd9c54c3:V1\",\"URN:AIP:DATASET:ssalto:b88e574a-c81b-4f64-9e77-7cdd49342dbe:V1\",\"URN:AIP:DATASET:ssalto:ffffbe1a-be39-40cb-8c6e-82452901db4b:V1\",\"URN:AIP:DATASET:ssalto:83924a74-acf3-4e25-9863-f2f974051537:V1\",\"URN:AIP:DATASET:ssalto:af6ac6c8-69f5-4ea7-b000-ea81f8634598:V1\",\"URN:AIP:DATASET:ssalto:1c2ce465-2bd0-4cbb-adda-160a5b979b57:V1\",\"URN:AIP:DATASET:ssalto:b2f89591-1568-43b6-b73c-067cdc2e8ab9:V1\",\"URN:AIP:DATASET:ssalto:af4130a8-b7a5-4895-9602-570cf706420f:V1\",\"URN:AIP:DATASET:ssalto:967a9913-1f0c-4cfe-9321-f940eeca2ef8:V1\",\"URN:AIP:DATASET:ssalto:5ae8b389-2500-405d-925e-6e2cba72b9e5:V1\",\"URN:AIP:DATASET:ssalto:0efb5fa2-4d96-49d9-aa63-106dd4f88df5:V1\",\"URN:AIP:DATASET:ssalto:31d12a4e-1837-4669-b6d9-b7bbfec5185e:V1\",\"URN:AIP:DATASET:ssalto:2598d532-340b-445b-83a3-82b0a2960eb9:V1\",\"URN:AIP:DATASET:ssalto:e551d123-0905-4c3d-b35e-78844655cb4b:V1\",\"URN:AIP:DATASET:ssalto:c4c3a620-76d0-4e08-997e-337aa69c1fcd:V1\",\"URN:AIP:DATASET:ssalto:b67c6f28-09fd-4117-bec9-321e780f0b2d:V1\",\"URN:AIP:DATASET:ssalto:246a2e8b-e897-491d-b2c9-c6c30aa2971f:V1\",\"URN:AIP:DATASET:ssalto:5df901f3-8a22-47dc-958f-04f70315886d:V1\",\"URN:AIP:DATASET:ssalto:387eaf98-bef8-4475-b9fb-9b7307efd168:V1\",\"URN:AIP:"
            + "DATASET:ssalto:d3299997-c94d-4bdf-a1f6-9336242c0692:V1\",\"URN:AIP:DATASET:ssalto:365cd59c-dbc1-4da7-9dfb-88411e68209d:V1\",\"URN:AIP:DATASET:ssalto:5d61886d-8e79-476e-b151-cc81a1fe1d1d:V1\",\"URN:AIP:DATASET:ssalto:30db068c-0617-40d6-903b-7ce2272f8d15:V1\",\"URN:AIP:DATASET:ssalto:8210ec2d-7a2c-4784-aaae-9bdddf4980f5:V1\",\"URN:AIP:DATASET:ssalto:61cc2837-55b7-454e-b8eb-ef6b7fb8563d:V1\",\"URN:AIP:DATASET:ssalto:168c17de-8b3e-45a3-9ff5-e4d6975272b1:V1\",\"URN:AIP:DATASET:ssalto:36395703-0c76-49ca-a6ca-ae8f8ea9cf8a:V1\",\"URN:AIP:DATASET:ssalto:21eb8dce-eba6-47a1-8799-9d92efe3b373:V1\",\"URN:AIP:DATASET:ssalto:6f3a8f1e-4862-4740-b724-f1a75be661dd:V1\",\"URN:AIP:DATASET:ssalto:3957c9d7-e8d2-4032-8500-a34e59c0609f:V1\",\"URN:AIP:DATASET:ssalto:62184729-ca7d-4b5f-9cb1-ca02a6c0716b:V1\",\"URN:AIP:DATASET:ssalto:861e45ba-198f-4323-a83a-0350f3baa7fc:V1\",\"URN:AIP:DATASET:ssalto:965bb039-fbd1-42ad-b2a3-8a5c5242308e:V1\",\"URN:AIP:DATASET:ssalto:67d71d4f-2df8-4861-b416-598af5b08490:V1\",\"URN:AIP:DATASET:ssalto:44893a9a-5566-41c0-9f9a-70ef37efd886:V1\",\"URN:AIP:DATASET:ssalto:6104aeb4-f563-4b40-976a-d18bc20d4947:V1\",\"URN:AIP:DATASET:ssalto:5fe072f3-a838-4623-bf52-687b47cc14b6:V1\",\"URN:AIP:DATASET:ssalto:40f4aad3-3b93-4b18-b911-ae6bc5fce884:V1\",\"URN:AIP:DATASET:ssalto:e4967a75-e20e-443e-b747-aebab2ff28c3:V1\",\"URN:AIP:DATASET:ssalto:b6569548-35e2-4749-8f36-91e9fde5a7d1:V1\",\"URN:AIP:DATASET:ssalto:63ba4863-4e5c-4b04-9284-152b606764c3:V1\",\"URN:AIP:DATASET:ssalto:5337c320-b51a-4ef5-b17e-c2b9b779b798:V1\"]},\"primaryPane\":\"COLLAPSED_EXPANDABLE\",\"searchResult\":{\"primaryPane\":\"COLLAPSED_EXPANDABLE\",\"facettesInitiallySelected\":true,\"enableFacettes\":true,\"enableQuicklooks\":false,\"enableDownload\":true,\"initialViewMode\":\"table\",\"displayMode\":\"data\",\"displayConf\":{\"quicklookColumnWidth\":400,\"quicklookColumnSpacing\":20},\"dataSectionLabelEn\":\"Data\",\"dataSectionLabelFr\":\"Data\",\"datasetsSectionLabelEn\":\"Datasets\",\"datasetsSectionLabelFr\":\"Datasets\",\"dataset\":{\"columns\":[{\"attributes\":[{\"name\":\"properties.DatasetLabel\"}],\"label\":{\"en\":\"Label\",\"fr\":\"Label\"}},{\"attributes\":[{\"name\":\"properties.DatasetProductClass\"}],\"label\":{\"en\":\"Product Class\",\"fr\":\"Product Class\"}},{\"attributes\":[{\"name\":\"properties.DatasetProductFamily\"}],\"label\":{\"en\":\"Product Family\",\"fr\":\"Product Family\"}},{\"attributes\":[{\"name\":\"properties.DatasetStartDate\"}],\"label\":{\"en\":\"Start Date\",\"fr\":\"Start Date\"}},{\"attributes\":[{\"name\":\"properties.DatasetEndDate\"}],\"label\":{\"en\":\"End Date\",\"fr\":\"End Date\"}},{\"attributes\":[{\"name\":\"properties.DatasetSize\"}],\"label\":{\"en\":\"Dataset Size\",\"fr\":\"Dataset Size\"}},{\"attributes\":[{\"name\":\"properties.DatasetNb_Objects\"}],\"label\":{\"en\":\"Number of Objects\",\"fr\":\"Number of Objects\"}}]},\"data\":{\"columns\":[{\"attributes\":[{\"name\":\"properties.DataName\"}],\"label\":{\"en\":\"Name\",\"fr\":\"Name\"}},{\"attributes\":[{\"name\":\"properties.DataStartDate\"}],\"label\":{\"en\":\"Start Date\",\"fr\":\"Start Date\"}},{\"attributes\":[{\"name\":\"properties.DataEndDate\"}],\"label\":{\"en\":\"End Date\",\"fr\":\"End Date\"}}],\"facets\":[{\"attributes\":[{\"name\":\"properties.DatasetProductClass\"}],\"label\":{\"en\":\"Product Class\",\"fr\":\"Product Class\"}},{\"attributes\":[{\"name\":\"properties.DatasetProductFamily\"}],\"label\":{\"en\":\"Product Family\",\"fr\":\"Product Family\"}},{\"attributes\":[{\"name\":\"properties.DataDataset\"}],\"label\":{\"en\":\"Dataset\",\"fr\":\"Dataset\"}},{\"attributes\":[{\"name\":\"properties.DataProductOption\"}],\"label\":{\"en\":\"Product Option\",\"fr\":\"Product Option\"}},{\"attributes\":[{\"name\":\"properties.DataObjectVersion\"}],\"label\":{\"en\":\"Object Version\",\"fr\":\"Object Version\"}},{\"attributes\":[{\"name\":\"properties.DataPhase\"}],\"label\":{\"en\":\"Phase\",\"fr\":\"Phase\"}}],\"sorting\":[{\"attributes\":[{\"name\":\"properties.DataName\"}]}]}},\"criterion\":[{\"pluginInstanceId\":\"1551712905886\",\"\n"
            + "label\":\"criteria\",\"active\":true,\"conf\":{\"attributes\":{\"firstField\":\"properties.DataStartDate\",\"secondField\":\"properties.DataEndDate\"}},\"pluginId\":6,\"container\":\"Gauche\"},{\"pluginInstanceId\":\"1551972906883\",\"label\":\"criteria\",\"active\":true,\"conf\":{\"attributes\":{\"firstField\":\"properties.DataCycleMin\",\"secondField\":\"properties.DataCycleMax\"}},\"pluginId\":4,\"container\":\"Droite\"},{\"pluginInstanceId\":\"1551972925494\",\"label\":\"criteria\",\"active\":true,\"conf\":{\"attributes\":{\"searchField\":\"properties.DataFileCreationDate\"}},\"pluginId\":5,\"container\":\"Gauche\"},{\"pluginInstanceId\":\"1551972941447\",\"label\":\"criteria\",\"active\":true,\"conf\":{\"attributes\":{\"firstField\":\"properties.DataOrbitMin\",\"secondField\":\"properties.DataOrbitMax\"}},\"pluginId\":4,\"container\":\"Droite\"},{\"pluginInstanceId\":\"1551972983660\",\"label\":\"criteria\",\"active\":true,\"conf\":{\"attributes\":{\"searchField\":\"properties.DataObjectVersion\"}},\"pluginId\":1,\"container\":\"Droite\"},{\"pluginInstanceId\":\"1552036732378\",\"label\":\"criteria\",\"active\":true,\"conf\":{\"attributes\":{\"searchField\":\"properties.DataPhase\"}},\"pluginId\":7,\"container\":\"Gauche\"}]}";

    @Test
    public void testMigrationV4() {
        String result = V4_0_0__update_modules_conf.updateConf(oldConf);
        System.out.println(result);
    }

}
